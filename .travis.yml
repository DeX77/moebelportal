language: ruby
rvm:
  - 1.8.7
  - 1.9.3
language: erlang
otp_release:
   - R15B01
   - R15B
   - R14B04
   - R14B03
   - R14B02


before_install:
  - "cd .."
  - "git clone git://github.com/evanmiller/ChicagoBoss.git"
  - "cd ChicagoBoss"
  - "make"
  - "cd ../moebelportal"
  - "cp ../ChicagoBoss/skel/priv/rebar/boss_plugin.erl priv/rebar/boss_plugin.erl"

before_script:
  - "bundle install"
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "rebar boss c=start_cmd"
  
script: "cucumber"

after_script:
  - "rebar boss c=stop_cmd"
